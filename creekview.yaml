global_modules:
  - creekview

creekview:
  module: creekview
  class: Creekview
  name: Creekview
  plugin:
    - deuce
    - mqtt

  areas:
    AO:
      affiliations:
        - Interior
        - 2nd
      members:
        .:
        Bathroom:
    Downstairs:
      affiliations:
        - Interior
        - 1st
      members:
        .:
    FR:
      affiliations:
      - Interior
      - 1st
      - Downstairs
      members:
        .:
    Master:
      affiliations:
      - Interior
      - 2nd
      members:
        .:
        Bathroom:
        Bedroom:
        Sitting:
    Front:
      affiliations:
        - Exterior
      members:
        .:
        Landscape:
        Gym:
        Garage:
        Courtyard:
    House:
      members:
      .:
    Backyard:
      affiliations:
        - Exterior
      members:
        .:
        Patio:
        Slope:
        Landscape:
        House:

  areamap:
    Alex:
    AO:
    Backyard:
      patio:
      bbq:
      landscape:
    Downstairs:
      Entry:
      LivingRoom:
      Southroom:
      Eastroom:
      Foyer:
    Family:
      Irina:
      Galina:
    FR:
    Front:
      Courtyard:
      Gym:
      Garage:
    Guest:
    House:
    Whole-House: House
    WH: House
    Infrastructure:
    Kitchen:
      Laundry:
      Pantry:
    Master:
      MBS: Sitting
      MBed: Bedroom
      Mbath: Bathroom
    Upstairs:
      Westroom:
      Northroom:
      Library:
    1st:
    2st:

  # Unless specified otherwise - driver is I2
  # - path: canonical name of the keypad
  #   buttons: Eight action slugs
  #   tail: Tail of the ISY. Driver is assumed to be ISY
  #   button_map: ISY entity_id to action slug
  #   if button is not found in button_map - slug is set to btn_{action}_slug

  keypads:
    - path: AO/AV
      buttons:
        - appletv
        - htpc
        - atlona
        - 
        - sonos
        - pause
        - speakers
        - tv
    - path: AO/Staircase
      buttons:
        - Courtyard 
        - Trash
        - 
        - 
        - 
        - Garage-L
        - Garage-S
    - path: AO/South/R
      buttons:
        - Garage
        - Courtyard
        - Backyard
        - 
        - 
        - 
        - Garage-L
        - Garage-S
    - path: AO/1
      tail: ao1
      button_map:
        ceiling: AO/Ceiling
        Ceiling-Desk: AO/Ceiling-desk
        Blinds1: AO/Doors-Shade
    - path: AO/2
      tail: ao2
    - path: AO/3
      tail: ao3
      button_map:
        blinds1: AO/Doors-Shade
        blinds2: AO/Window-Shade
        hot-water: House/Hot-Water
    - path: AO/4
      tail: ao4
      button_map:
        mbath: master/bathroom-Anyon
        mbed: master/bedroom-Anyon
        colors: House/Colors
        1st: house/1st-Anyon
        2nd: house/2nd-Anyon
        garage-monitor: front/garage-monitor
    - path: AO/Bathroom
      tail: aob
      button_map:
        Sonos: AO/Bathroom-Sonos
        Nightlight: AO/Bathroom-Nightlight
        Office: AO/Anyon
        hot-water: House/Hot-Water
    - path: AO/East/L
      tail: aoel
    - path: AO/East/R
      tail: aoer
    - path: Downstairs/Foyer/1
      tail: f1
      button_map:
        colors: House/Colors
        eastroom: downstairs/Eastroom-Ceiling
        kitchen-anyon: kitchen/anyon
        kitchen-ceiling: kitchen/ceiling
        downstairs-bathroom: downstairs/bahroom
        fr-ambient: fr/ambient
        fr-blinds: fr/blinds
        fr-anyon: fr/anyon
    - path: Downstairs/Foyer/Junction
      tail: fj
      button_map:
        1anyon: house/1st-Anyon
        1st-blinds: house/1st-blinds
        2anyon: house/2nd-Anyon
    - path: Downstairs/Stairs
      tail: stairs1
      button_map:
        tree: downstairs/tree
        wh-colors: house/colors
    - path: Downstairs/Foyer/7
      tail: f7
      button_map:
        kitchen-tv: kitchen/tv
        fr-blinds: fr/blinds
        downstairs-blinds: downstairs/blinds

  isy_keypad_synonyms:
    ao1: ao/1
    ao2: ao/2
    ao3: ao/3
    ao4: ao/4
    aob: ao/bathroom
    aoer: ao/eastr
    aoel: ao/eastl
    f1: downstairs/foyer/7
    f7: downstairs/foyer/7
    fj: downstairs/foyer/j
    entry: downstairs/Entry
    fr2: fr/2
    k1: kitchen/1
    k2: kitchen/2
    k3: kitchen/3
    stairs1: downstairs/stairs1
    guest1: guest/1
    guest2: guest/2
    mbathn: master/bathn
    mbathw: master/bathw
    mbedw: master/bedw
    mbede: master/bede
    landing: upstairs/landing
    westroom: upstairs/westroom
    northroom: upstairs/northroom
    ucor: upstairs/corridor
  
  isy_entity_tails:
    light: 
      attribute: is_dark
    duskdawn: 
      attribute: is_dark
    door:
      device_type: door
      attribute: opening
  isy_sensor_controls:
    DON:
      tail: motion
      value: on
    DOF:
      tail: motion
      value: off
    CLITEMP:
      tail: temp
      value_type: float
      value_multiplier: .1
    LUMIN:
      tail: lux
      value_type: int

  ison_power_av:
    action_template: "{{ 'ind-SLUG'.lower().replace('-','/') }}"
    value_template: "{{ 'ON' if float(states('ENTITY')) OPERAND else 'OF'}}"
    domain: sensor
    # ^(?'entity'(?>sensor|binary_sensor)\.(?>[a-z_]+)).*(?'operand'[<>]{1}).*(?'int'>\d+)$
    conditions:
      AO-Receiver: ao_receiver_power > 5
      AO-Sonos: ao_sonos_power > 3



  # keypad_actions:
  #   MBS/West:
  #     - chromecast
  #     - appletv
  #     - htpc
  #     - 
  #     - voldn
  #     - volup
  #     - pause
  #     - poweroff
  #   MBS/Couch:
  #     - appletv
  #     - htpc
  #     - voldn
  #     - volup
  #     - ceiling
  #     - lamp
  #     - blinds
  #     - tv
  #   Gym: 
  #     - ac
  #     - htpc
  #     - chromecast
  #     - 
  #     - volup
  #     - voldn
  #     - pause
  #     - tv
  #   FR/AV:
  #     - appletv
  #     - htpc
  #     - TV
  #     - KitchenTV
  #     - VolDn
  #     - Volup
  #     - pause
  #     - blinds
  #   Courtyard1:
  #     - Coachlamps
  #     - Courtyard 
  #     - Arcade
  #     - Trash
  #     - 
  #     - 
  #     - Garage-L
  #     - Garage-S
  #   Courtyard2:
  #     - ceiling-1
  #     - ceiling-2
  #     - 
  #     - 
  #     - 
  #     - 
  #     - Garage-L
  #     - Garage-S
  #   Garage1:
  #     - Garage
  #     - Tasklamp
  #     - Trash
  #     - Shelf
  #     - 
  #     - 
  #     - Garage-L
  #     - Garage-S
  #   Garage2:
  #     - Garage
  #     - Rack-Monitor
  #     - Tasklamp
  #     - Shelf
  #     - AlexPC-HDBT
  #     - Garage-Monitor
  #     - Garage-L
  #     - Garage-S
  #   garage3:
  #     - Trash
  #     - Garage
  #     - 
  #     - 
  #     - 
  #     - 
  #     - Garage-L
  #     - Garage-S
  #   East2:
  #     - Downs
  #     - Landscape
  #     - Pendants
  #     - Pedestals
  #     - Slope
  #     - Colors
  #     -
  #     - Backyard-Anyon
  #   Patio2:
  #     - Trash
  #     - 
  #     - Pool
  #     - Sonos
  #     - 
  #     - 
  #     - Garage-L
  #     - Garage-S
  #   BBQ:
  #     -
  #     -
  #     -
  #     -
  #     -
  #     -
  #     -
  #     -
  #   Entry:
  #     - Front-AnyOn
  #     - 
  #     - Sideyard
  #     - Coachlamps
  #     - 
  #     - 
  #     - Garage-L
  #     - Garage-S
  #   Front/Ganex:
  #     - Garage-Annex
  #     - Trash
  #     - Coachlamps
  #     - Tasklamp
  #     - 
  #     - 
  #     - Garage-L
  #     - Garage-S
  #   Backyard/Patio:
  #     - Paio-Arches
  #     - Landscape
  #     - Pendants
  #     - Pedestals
  #     - Slope
  #     - Colors
  #     - 
  #     - Anyon
  #   House/South:
  #     - Trash
  #     - Patio-Ceiling
  #     - Pool
  #     - Sonos
  #     - 
  #     - 
  #     - Garage-L
  #     - Garage-S
  #   backyard/landscape:
  #     - Landscape
  #     - ''
  #     - ''
  #     - ''
  #     - ''
  #     - ''
  #     - ''
  #     - ''
  #   Master/Balcony:
  #     - Balcony
  #     -
  #     - 
  #     -
  #     - 
  #     - 
  #     - 
  #     - 
      





  # actions:
  #   AV:
  #     TV:
  #       action: tv
  #       parameters:
  #       - area
  #       - index
  #       sequence: |-
  #         tv_action(area, index, command)
  #       indicator: |-
  #         tv_indicator(area, index)
  #   - appletv
  #   - htpc
  #   - atlona
  #   - sonos
  #   - chromecast
  #   - pause
  #   - speakers      
  #   - volup
  #   - voldn
  # Comfort:
  #   - blinds
  #   - ac
  # Lights:
  #   - ceiling
  #   - lamp
  #   - Garage
  #   - Courtyard
  #   - Backyard
  # Security:
  #   - Garage-L
  #   - Garage-S



  # i2_keypad_synonyms:
  #   # kp/AO/AV: AO/AV
  #   # kp/mbs/Wall: Master/Sitting/Wall
  #   # kp/mbs/Couch: Master/Sitting/Couch
  #   # kp/gym: Front/Gym
  #   # kp/FR/AV: FR/AV
  #   # kp/AO/southr: AO/South/R
  #   # kp/courtyard/1: front/courtyard1
  #   # kp/courtyard/2: front/courtyard2
  #   # kp/garage/1: Front/Garage1
  #   # kp/garage/2: front/garage2
  #   # kp/garage/3: front/garage3
  #   # kp/east/2: backyard/East2
  #   # kp/patio/2: backyard/Patio2
  #   # kp/bbq: backyard/BBQ
  #   # garage/annex: front/garage/annex
  #   # patio/arches: backyard/patio/arches
  #   Landscape-6: backyard/landscape
  # arealist:
  # - Alex
  # - AO
  # - Backyard
  # - Downstairs
  # - Family
  # - FR
  # - Front
  # - Guest
  # - House
  # - Infrastructure
  # - Kitchen
  # - Master
  # - Upstairs
